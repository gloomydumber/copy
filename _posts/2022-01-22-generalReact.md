---
layout: post
title: "React"
date: 2022-01-22 12:50:00
categories: WEB-FRONTEND
permalink: /archivers/React
nocomments: false
use_math: true
---

# React

studying react

hooks, error handling, etc...

editing...

## React ê´€ë ¨

https://github.com/skidding/cosmos component ê°œë³„ ì •ë¦¬

https://sohyunsaurus.tistory.com/37 react ê°œë°œìë¼ë©´ ì•Œì•„ì•¼í•˜ëŠ” 15ê°€ì§€ custom hooks

reddit.com/r/reactjs/redit reactê²Œ

### Reactê°€ ë Œë”ë§ì„ ìˆ˜í–‰í•˜ëŠ” ì‹œì 

React ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ì„ ìˆ˜í–‰í•˜ëŠ” ì‹œì ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

1. Propsê°€ ë³€ê²½ë˜ì—ˆì„ ë•Œ

2. Stateê°€ ë³€ê²½ë˜ì—ˆì„ ë•Œ

3. forceUpdate() ë¥¼ ì‹¤í–‰í•˜ì˜€ì„ ë•Œ

4. ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë˜ì—ˆì„ ë•Œ

### react table ê´€ë ¨

https://www.daleseo.com/react-table/ react-table ê´€ë ¨

### react drang and drop êµ¬í˜„ ê´€ë ¨

https://moong-bee.com/posts/react-drag-and-drop-list drag and drop ì§ì ‘ êµ¬í˜„

https://watermelonlike.tistory.com/176 react drag and drop ê´€ë ¨

https://www.biew.co.kr/entry/HTML5%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%9C-%EB%93%9C%EB%9E%98%EA%B7%B8%EC%95%A4%EB%93%9C%EB%A1%AD reactì•„ë‹˜, html drag and drop ì„¤ëª…

### useEffect data fetching ê´€ë ¨

https://darrengwon.tistory.com/275 useEffectì—ì„œ ë°ì´í„° fetchingí•˜ê¸°

useEffectì—ì„œ ë°ì´í„° fetchingì‹œ, race condition ë¬¸ì œ ë° throttle, debounce

https://tecoble.techcourse.co.kr/post/2021-09-12-race-condition-handling/ race condition - í…Œì½”ë¸”

https://velog.io/@pius712/useEffect-race-condition-%EB%8B%A4%EB%A3%A8%EA%B8%B0 race condition

https://webclub.tistory.com/607 throttle, debounce

### useState

https://velog.io/@seongkyun/React%EC%9D%98-setState%EA%B0%80-%EB%B9%84%EB%8F%99%EA%B8%B0-%EC%B2%98%EB%A6%AC%EB%90%98%EB%8A%94-%EC%9D%B4%EC%9C%A0 useStateê°€ ë¹„ë™ê¸°ì²˜ëŸ¼ ì‘ë™í•˜ëŠ” ì´ìœ 

### useRef

https://velog.io/@juno7803/React-useRef-200-%ED%99%9C%EC%9A%A9%ED%95%98%EA%B8%B0 useRef 200% í™œìš©í•˜ê¸°

### reactì—ì„œ setInterval ì‚¬ìš©í•˜ê¸° (useInterval Custom Hook)

https://iborymagic.tistory.com/96

https://bsnn.tistory.com/50

https://mingule.tistory.com/65

https://www.suzie.world/blog/making-setinterval-declarative-with-react-hooks

https://velog.io/@jakeseo_me/%EB%B2%88%EC%97%AD-%EB%A6%AC%EC%95%A1%ED%8A%B8-%ED%9B%85%EC%8A%A4-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8%EC%97%90%EC%84%9C-setInterval-%EC%82%AC%EC%9A%A9-%EC%8B%9C%EC%9D%98-%EB%AC%B8%EC%A0%9C%EC%A0%90

### useLayoutEffect

https://merrily-code.tistory.com/46 useLayoutEffect ì—ê´€í•˜ì—¬

https://always-develop.tistory.com/73 useEffectì™€ useLayoutEffect ì°¨ì´

### websocket ìˆ˜ì‹  ë°ì´í„°ë¥¼ stateë¡œ ì´ìš©í•  ë•Œ

https://stackoverflow.com/questions/66615601/react-websocket-is-there-a-way-to-throttle-to-limit-the-number-of-times-the-c

https://velog.io/@seongkyun/React-%EC%B5%9C%EC%A0%81%ED%99%94-buffer%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%98%EC%97%AC-%EC%83%81%ED%83%9C-%EA%B0%B1%EC%8B%A0-%EC%A4%84%EC%9D%B4%EA%B8%B0 bufferë¡œ í•´ê²°(ì—…ë¹„íŠ¸ í´ë¡ ì½”ë”©)

## References

[jbee.io](https://jbee.io/){: target="\_blank"}

https://react.vlpt.us/ react ê³µë¶€ ì‚¬ì´íŠ¸ (ë²¨ë¡œí¼íŠ¸ì™€í•¨ê»˜í•˜ëŠ”ëª¨ë˜ë¦¬ì•¡íŠ¸)

<!-- ![permasecond](/assets/posts/2020-02-21-cmdcolor/permasecond.png) -->

## styled-components

### general

```javascript
function App() {
  return (
    <div style={{ display: "flex" }}>
      <div style={{ backgroundColor: "teal", width: 100, height: 100 }}></div>
      <div style={{ backgroundColor: "tomato", width: 100, height: 100 }}></div>
    </div>
  );
}

export default App;
```

ìœ„ì™€ ê°™ì´ ì‘ì„±í•´ì•¼í•  CSSë¥¼, ì•„ë˜ì™€ ê°™ì´ ì ìš©

```javascript
import styled from "styled-components";

const Father = styled.div`
  display: flex;
`;

const BoxOne = styled.div`
  background-color: teal;
  width: 100px;
  height: 100px;
`;

const BoxTwo = styled.div`
  background-color: tomato;
  width: 100px;
  height: 100px;
`;

const Text = styled.span`
  color: white;
`;

function App() {
  return (
    <Father>
      <BoxOne>
        <Text>Hello</Text>
      </BoxOne>
      <BoxTwo />
    </Father>
  );
}

export default App;
```

```javascript
import styled from "styled-components";

const Father = styled.div`
  display: flex;
`;

const Box = styled.div`
  background-color: ${(props) => props.bgColor};
  width: 100px;
  height: 100px;
`;

const Circle = styled(Box)`
  border-radius: 50px;
`;

function App() {
  return (
    <Father>
      <Box bgColor="teal" />
      <Circle bgColor="tomato" />
    </Father>
  );
}

export default App;
```

classëª…ì€ styled-componentsì—ì„œ uniqueí•œ ì´ë¦„ìœ¼ë¡œ dynamically ìƒì„±. (duplication, overlap, misspelling ë°©ì§€)

props, extend(ìƒì†ê³¼ ìœ ì‚¬) ì‚¬ìš© ê°€ëŠ¥

CSS partì™€ Component êµ¬í˜„ partë¥¼ ë¶„ë¦¬

### as / attrs

```javascript
import styled from "styled-components";

const Father = styled.div`
  display: flex;
`;

const Input = styled.input.attrs({ required: true })`
  background-color: tomato;
`;

function App() {
  return (
    <Father as="header">
      // ì›ë˜, fatherëŠ” divë¡œ ì‘ì„±ë˜ì—ˆì§€ë§Œ, asë¡œ header tagë¡œ render
      <Input /> // attrsë¥¼ í†µí•´ require: true ì†ì„±ì„ í•œ ë²ˆì— ë¶€ì—¬
      <Input />
      <Input />
      <Input />
      <Input />
    </Father>
  );
}
export default App;
```

asë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œì¨, CSS ì†ì„±ì€ ìœ ì§€í•˜ë˜ ë‹¤ë¥¸ tagë¡œ ì‘ì„±ë˜ë„ë¡ í•  ìˆ˜ ìˆìŒ

attrsë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œì¨, tagì— í•˜ë‚˜í•˜ë‚˜ ì†ì„± ë¶€ì—¬í•  í•„ìš” ì—†ì´, í•œ ë²ˆì— ë¶€ì—¬

### animation string interpolation

```javascript
import styled, { keyframes } from "styled-components";

const Wrapper = styled.div`
  display: flex;
`;

const rotationAnimation = keyframes`
  0% {
    transform: rotate(0deg);
    border-radius: 0px;
  }
  50% {
    border-radius: 100px;
  }
  100%{
    transform: rotate(360deg);
    border-radius: 0px;
  }
`;

const Box = styled.div`
  height: 200px;
  width: 200px;
  background-color: tomato;
  display: flex;
  justify-content: center;
  align-items: center;
  animation: ${rotationAnimation} 1s linear infinite; // animationì„ string interpolationìœ¼ë¡œ ì²˜ë¦¬
  span {
    font-size: 150px;
    &:hover {
      // & ë¡œ ê°„í¸í•˜ê²Œ ì•¡ì…˜ ì²˜ë¦¬ ê°€ëŠ¥
      font-size: 50px;
    }
  }
`;

function App() {
  return (
    <Wrapper>
      <Box>
        <span>ğŸ§</span>
      </Box>
    </Wrapper>
  );
}

export default App;
```

animationì„ ë”°ë¡œ ì •ì˜í•˜ì—¬, string interpolationìœ¼ë¡œ ì²˜ë¦¬ ê°€ëŠ¥

HTML ìš”ì†Œì•ˆì˜ ë‹¤ë¥¸ ìš”ì†Œì—ë„ CSS ì ìš© ê°€ëŠ¥, ë˜ ë‚´ë¶€ scopeì— '&'ë¡œ ê·¸ëŸ¬í•œ ìš”ì†Œì— ì•¡ì…˜ê¹Œì§€ ê°„í¸í•˜ê²Œ ì¶”ê°€ ê°€ëŠ¥ (pseudo selector)

### pseudo selector

```javascript
import styled, { keyframes } from "styled-components";

const Wrapper = styled.div`
  display: flex;
`;

const rotationAnimation = keyframes`
  0% {
    transform: rotate(0deg);
    border-radius: 0px;
  }
  50% {
    border-radius: 100px;
  }
  100%{
    transform: rotate(360deg);
    border-radius: 0px;
  }
`;

const Emoji = styled.span`
  font-size: 150px;
`;

const Box = styled.div`
  height: 200px;
  width: 200px;
  background-color: tomato;
  display: flex;
  justify-content: center;
  align-items: center;
  animation: ${rotationAnimation} 1s linear infinite;
  ${Emoji} {
    &:hover {
      // Componentë¡œ ë¶„ë¦¬í•´ë„ ë‹¤ë¥¸ Component ë‚´ë¶€ì—ì„œ ì ìš© ê°€ëŠ¥
      font-size: 50px;
    }
  }
`;

function App() {
  return (
    <Wrapper>
      <Box>
        <Emoji as="p">ğŸ§</Emoji>
        {/* asë¡œ ë‹¤ë¥¸ HTML tagë¡œ ì‘ìš©í•˜ë”ë¼ë„ CSS íš¨ê³¼, Animationì€ ê·¸ëŒ€ë¡œ ì ìš© */}
      </Box>
      <Emoji as="p">ğŸ§</Emoji>
      {/* Boxë°–ì˜ EmojiëŠ” CSS Animation íš¨ê³¼ê°€ ì ìš©ë˜ì§€ ì•ŠìŒ. */}
    </Wrapper>
  );
}

export default App;
```

ë‹¤ë¥¸ Component ë‚´ë¶€ì— ìˆëŠ” Componentì˜ CSSë„ ì •ì˜í•  ìˆ˜ ìˆìŒ (pseudo selector)

### ThemeProvider

```javascript
// index.js

import React from "react";
import ReactDOM from "react-dom/client";
import { ThemeProvider } from "styled-components"; // ThemeProviderë¥¼ import í•´ì•¼ í•¨.
import App from "./App";

// darkTheme & lightTheme ê°ì²´ë¥¼ ì„ ì–¸, ì†ì„±ê°’ì´ ê°™ì•„ì•¼í•¨.

const darkTheme = {
  textColor: "whitesmoke",
  backgroundColor: "#111",
};

const lightTheme = {
  textColor: "#111",
  backgroundColor: "whitesmoke",
};

const root = ReactDOM.createRoot(document.getElementById("root"));
root.render(
  <React.StrictMode>
    <ThemeProvider theme={darkTheme}>
      {" "}
      // theme props
      <App />
    </ThemeProvider>
  </React.StrictMode>
);
```

```javascript
import styled, { keyframes } from "styled-components";

const Title = styled.h1`
  color: ${(props) => props.theme.textColor}; // theme props ì´ìš©
`;

const Wrapper = styled.div`
  display: flex;
  height: 100vh;
  width: 100vw;
  justify-content: center;
  align-items: center;
  background-color: ${(props) =>
    props.theme.backgroundColor}; // theme props ì´ìš©
`;

function App() {
  return (
    <Wrapper>
      <Title>Hello</Title>
    </Wrapper>
  );
}

export default App;
```

styled-componentsì—ì„œ ThemeProviderë¥¼ ì œê³µ í•¨. theme ê°ì²´ë“¤ì„ ìƒì„±í•˜ê³  propsë¡œ ë„˜ê²¨ì£¼ë©´, í¸ë¦¬í•œ theme ê¸°ëŠ¥ ì´ìš© ê°€ëŠ¥

## typescript on React

### general

for type protection

```bash
npx create-react-app appName --template typescript
yarn create react-app appName --template typescript
```

ì²˜ìŒ create-react-appì„ typescript templateë¡œ ì‹œì‘í•˜ëŠ” ë°©ë²•

```bash
npm install --save typescript @types/node @types/react @types/react-dom @types/jest
```

ê¸°ì¡´ create-react-appì— typescriptë¥¼ ìƒˆë¡œ ì ìš©í•˜ëŠ” ë°©ë²•

```bash
npm i --save-dev @types/styled-components
```

jsë¡œ ì‘ì„±ëœ moduleì„ tsì—ì„œ ì‚¬ìš©í•  ë•Œ, tsì§€ì› moduleì„ ì„¤ì¹˜ í•´ì¤˜ì•¼ í•¨.

DefinitelyTyped ì—ì„œ ì˜¤í”ˆì†ŒìŠ¤ë¡œ ì—¬ëŸ¬ ëª¨ë“ˆë“¤ì˜ typescript ì§€ì› ì¤‘

### interface

```tsx
// App.tsx
import Circle from "./Circle";

function App() {
  return (
    <div>
      <Circle bgColor="teal" /> // bgColorë¼ëŠ” props ì´ìš© ì¤‘
      <Circle bgColor="tomato" />
    </div>
  );
}

export default App;
```

```typescript
// Circle.tsx
import styled from "styled-components";

interface ContainerProps {
  bgColor: string;
}

const Container = styled.div<ContainerProps>`
  // styled-components ì—ì„œ Props InterfaceëŠ” ì´ëŸ° ë°©ì‹ìœ¼ë¡œ.
  width: 200px;
  height: 200px;
  background-color: ${(props) => props.bgColor};
  border-radius: 100px;
`;

interface CircleProps {
  bgColor: string;
}

function Circle({ bgColor }: CircleProps) {
  // propsì— type ë¶€ì—¬ë¥¼ ìœ„í•´ interface ì •ì˜ ë° ì´ìš©
  return <Container bgColor={bgColor} />;
}

export default Circle;
```

componentì˜ propsì— typesì„ ì£¼ë ¤ë©´ interfaceë¥¼ ì´ìš©

### default props / optional props

```typescript
// App.tsx
import Circle from "./Circle";

function App() {
  return (
    <div>
      <Circle borderColor="lime" bgColor="teal" />
      <Circle text="i'm here" bgColor="tomato" />
    </div>
  );
}

export default App;
```

```typescript
// Circle.tsx
import styled from "styled-components";

interface ContainerProps {
  bgColor: string;
  borderColor: string; // ContainerPropsì—ì„œëŠ” required props.
  text?: string;
}

const Container = styled.div<ContainerProps>`
  width: 200px;
  height: 200px;
  background-color: ${(props) => props.bgColor};
  border-radius: 100px;
  border: 1px solid ${(props) => props.borderColor};
`;

interface CircleProps {
  bgColor: string;
  borderColor?: string; // CirclePropsì—ì„œëŠ” Optional Props.
  text?: string;
}

function Circle({ bgColor, borderColor, text = "default text" }: CircleProps) {
  // = ì„ í†µí•´ default props ì´ìš©.
  return (
    <Container
      bgColor={bgColor}
      borderColor={borderColor ?? bgColor} // borderColorê°€ undefinedì¸ ê²½ìš°, bgColorë¥¼ ì „ë‹¬
      text={text}
    >
      {text}
    </Container>
  );
}

export default Circle;
```

? ì—°ì‚°ìë¥¼ í†µí•´, optional props ì„¤ì • ê°€ëŠ¥. default propsì˜ ê²½ìš° typescriptì˜ ê¸°ëŠ¥ì€ ì•„ë‹ˆì§€ë§Œ, props ì „ë‹¬ì‹œ = ì—°ì‚°ìë¥¼ í†µí•´ ì„¤ì • ê°€ëŠ¥

?? ì—°ì‚°ìë¥¼ í†µí•´, propsê°€ undefinedì¸ ê²½ìš°ì— ë”°ë¡œ propsë¡œ ì „ë‹¬í•  parameter ì„¤ì • ê°€ëŠ¥

### React state with ts

```tsx
const [counter, setCounter] = useState(1); // ì´ˆê¸°ê°’ì„ 1ë¡œ ì£¼ì—ˆìœ¼ë¯€ë¡œ, ts compilerì—ì„œ counter stateëŠ” number ê°’ìœ¼ë¡œ ì˜ˆìƒ
```

```tsx
const [counter, setCounter] = useState<number | string>(1); // number ë˜ëŠ” string typeì„ stateë¡œ ê°€ì§ˆ ìˆ˜ ìˆìŒì„ ì„ ì–¸
```

default stateë¥¼ ì„¤ì •í•´ì£¼ë©´ í•´ë‹¹ typeë§Œì„ stateë¡œ ì¶”ë¡ í•´ì„œ í•´ë‹¹ typeìœ¼ë¡œë§Œ ë³€ê²½ì„ í—ˆìš©í•˜ê³ , ë‹¤ë¥¸ typeìœ¼ë¡œ setStateë¥¼ ì‹œë„í•˜ëŠ” ìˆœê°„ ts compilerëŠ” error notify

### ts on react example (form event)

```tsx
import React from "react";
import { useState } from "react";

function App() {
  const [value, setValue] = useState("");
  const onChange = (e: React.FormEvent<HTMLInputElement>) => {
    setValue(e.currentTarget.value); // React.js TSëŠ” targetì´ ì•„ë‹ˆë¼ currentTarget ì‚¬ìš©
    // same as below
    // const {
    //   currentTarget: { value },
    // } = e;
    // setValue(value);
  };
  const onSubmit = (e: React.FormEvent<HTMLFormElement>) => {
    e.preventDefault();
    console.log("hello", value);
  };
  return (
    <div>
      <form onSubmit={onSubmit}>
        <input
          value={value}
          onChange={onChange}
          type="text"
          placeholder="username"
        />
        <button>Log in</button>
      </form>
    </div>
  );
}

export default App;
```

React.FormEvent<HTMLFormElement> ì™€ ê°™ì€ type settingì´ í•„ìš”í•¨. êµ¬ê¸€ë§ ë“±ìœ¼ë¡œ html eventë“±ì´ tsì—ì„œëŠ” ì–´ë–¤ typeì¸ì§€ ì•Œì•„ë‚´ì•¼ í•¨.

React.jsë¥¼ tsì—ì„œ ì‚¬ìš©í•  ê²½ìš° event.targetì´ ì•„ë‹Œ, event.currentTargetì„ ì‚¬ìš©í•˜ê¸°ë¡œ í•¨ (event.target vs event.currentTarget)

### ts on react example (styled-components module)

reactì— ì ìš©í•  moduleì—ì„œì˜ ts ì‚¬ìš© ì˜ˆì œë¡œ styled-componentsì—ì„œ themeì„ ì„¤ì •í•´ë³¸ë‹¤.

```ts
//styled.d.ts
// import original module declarations
import "styled-components";

// and extend them!
declare module "styled-components" {
  export interface DefaultTheme {
    textColor: string;
    bgColor: string;
  }
}
```

[styled-components Official docs for ts](https://styled-components.com/docs/api#typescript){: target="\_blank"}

ìš°ì„ , ê³µì‹ë¬¸ì„œì˜ ì„¤ëª…ëŒ€ë¡œ styled.d.tsë¥¼ ìƒì„±í•´ì„œ ì„¤ì • ì½”ë“œë¥¼ ì…ë ¥í•œë‹¤.

```typescript
// theme.ts
import { DefaultTheme } from "styled-components";

export const lightTheme: DefaultTheme = {
  textColor: "black",
  bgColor: "whitesmoke",
  btnColor: "teal",
};

export const darkTheme: DefaultTheme = {
  textColor: "lime",
  bgColor: "black",
  btnColor: "teal",
};
```

ì´í›„ theme.tsì—ì„œ DefaultTheme typeì˜ theme ê°ì²´ë“¤ì„ ì„¤ì •í•´ì¤€ë‹¤.

```tsx
// index.tsx
import React from "react";
import ReactDOM from "react-dom";
import App from "./App";
import { ThemeProvider } from "styled-components";
import { lightTheme, darkTheme } from "./theme";

ReactDOM.render(
  <React.StrictMode>
    <ThemeProvider theme={lightTheme}>
      <App />
    </ThemeProvider>
  </React.StrictMode>,
  document.getElementById("root")
);
```

ë§ˆì°¬ê°€ì§€ë¡œ index.tsxì—ì„œ ThemeProvider Componentë¥¼ importí•˜ì—¬ ì„¤ì •í•œë‹¤. themeê°ì²´ ë˜í•œ importí•œë‹¤.

```tsx
// App.tsx
import React from "react";
import styled from "styled-components";

const Container = styled.div`
  background-color: ${(props) => props.theme.bgColor};
`;

const H1 = styled.h1`
  color: ${(props) => props.theme.textColor};
`;

function App() {
  return (
    <Container>
      <H1>protected</H1>
    </Container>
  );
}

export default App;
```

ì´í›„ propsì—ì„œ theme props ê°ì²´ë¡œ ì ‘ê·¼í•˜ì—¬ attributeë“¤ì„ ì´ìš©í•´ ìƒ‰ìƒ ì ‘ê·¼ ë° ì„¤ì •

c.f.) [React.js Official docs for events](https://reactjs.org/docs/events.html){: target="\_blank"} (React Synthetic Event)

## react-query

### general

the way of fetching data on React
